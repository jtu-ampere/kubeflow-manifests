apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
# Application controller is used to provide Google Cloud Console integration.
- ../../third-party/application
- ../../base/application
- ../platform-agnostic
- ../gcp/inverse-proxy

images:
- name: docker.io/mrdojojo/kfp-api-server
  newTag: master
- name: docker.io/mrdojojo/kfp-frontend
  newTag: master
- name: docker.io/mrdojojo/kfp-persistence-agent
  newTag: master
- name: docker.io/mrdojojo/kfp-scheduled-workflow-controller
  newTag: master
- name: docker.io/mrdojojo/kfp-cache-deployer
  newTag: master
- name: docker.io/mrdojojo/kfp-cache-server
  newTag: master
- name: docker.io/mrdojojo/kfp-metadata-envoy
  newTag: master
- name: docker.io/mrdojojo/kfp-metadata-writer
  newTag: master
- name: docker.io/mrdojojo/kfp-viewer-crd-controller
  newTag: master
- name: docker.io/mrdojojo/kfp-visualization-server
  newTag: master
- name: docker.io/mrdojojo/kfp-inverse-proxy-agent
  newTag: master

patches:
  - path: api-server-patch.yaml
# !!! If you want to customize the namespace,
# please refer sample/cluster-scoped-resources to update the namespace for cluster-scoped-resources
namespace: kubeflow
# Identifier for application manager to apply ownerReference.
# The ownerReference ensures the resources get garbage collected
# when application is deleted.
labels:
- includeSelectors: true
  pairs:
    application-crd-id: kubeflow-pipelines
